\textbf{Pre-condizione generale}{: l'utente è identificato come Cuoco o come Chef }\textit{c}

\section[creaProcedura]{\texorpdfstring{creaProcedura(\myuline{nome}: Testo, \myuline{èRicetta}: sì/no)}}\label{creaProcedura}
\textbf{Pre-condizioni:} -\newline
\textbf{Post-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {[\textbf{Se} \myuline{èRicetta} == sì]}
	\setlist{nolistsep}
	\begin{itemize}[label=$-$, noitemsep]
		\item È stata creata un'istanza \textit{p} di Ricetta
		\item \textit{p.pubblicato} = no
		\item \textit{p.nome } = \myuline{nome}
	\end{itemize}
	\item {[\textbf{Se} \myuline{èRicetta} == no]}
	\setlist{nolistsep}
	\begin{itemize}[label=$-$, noitemsep]
		\item È stata creata un'istanza \textit{p} di Preparazione
		\item \textit{p.pubblicato} = no
		\item \textit{p.nome } = \myuline{nome}
	\end{itemize}
	\item \textit{p}\textbf{ si trova} nel ricettario
	\item \textit{c }\textbf{è proprietario di}\textit{ p}
\end{itemize}

\subsection[creaVarianteProcedura]{\texorpdfstring{creaVarianteProcedura(\myuline{procedura}: Procedura, \myuline{}{nome}: Testo)}}\label{creaVarianteProcedura}
\textbf{Pre-condizioni:} -\newline
\textbf{Post-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {È stata creata un'istanza }\textit{p}{ di Procedura}
	\setlist{nolistsep}
	\begin{itemize}[label=$-$, noitemsep]
		\item \textit{p.pubblicato }{= no}
		\item \textit{p.tempo }{= }\myuline{procedura.tempo}
		\item \textit{p.nome }{= }\myuline{}{nome}
		\item \textit{p.preparabileInAnticipo }{= }\myuline{procedura.preparabileInAnticipo}
		\item {Per ogni Passo }\textit{pas}{ tale che }\myuline{procedura}
			\textbf{ è formata da }\textit{pas }{è stata creata un'istanza }
			\textit{ps}{ di Passo tale che}
		\setlist{nolistsep}
		\begin{itemize}[label=$-$, noitemsep]
			\item \textit{ps.descrizione }{= }\textit{pas.descrizione}
			\item \textit{p }{è}{~}\textbf{formata da }\textit{ps}
		\end{itemize}
		\item {Per ogni Ingrediente }\textit{ing}{~tale che }\textit{ing}{~}
			{compone}{~}\myuline{procedura}{~}{è stata creata un'istanza }
			\textit{i}{~di Ingrediente tale che}
		\setlist{nolistsep}
		\begin{itemize}[label=$-$, noitemsep]
			\item \textit{i.nome }{= }\textit{ing.nome}
			\item \textit{i.dose }{= }\textit{ing.dose}
			\item \textit{i }\textbf{compone}\textit{~p}
		\end{itemize}
	\item \textit{p }\textbf{variante di }\myuline{procedura}
	\item \textit{p }\textbf{si trova nel }{Ricettario}
	\end{itemize}
	\item \textit{c }\textbf{è proprietario di}\textit{~p}
\end{itemize}

\subsection[apriProceduraPerModifica]{\texorpdfstring{apriProceduraPerModifica(\myuline{procedura}: Procedura)}}\label{apriProceduraPerModifica}
\textbf{Pre-condizioni: }{-}\newline
\textbf{Post-condizioni: }
\begin{itemize}[label=$-$, noitemsep]
	\item {se c }\textbf{è proprietario di}{~}\myuline{procedura}{, }\myuline{procedura}{~non
	  }\textbf{riguarda}{~nessun Assegnamento e non }\textbf{serve }{per nessun Menù}
	\setlist{nolistsep}
	\begin{itemize}[label=$-$, noitemsep]
		\item {{[}}\textbf{Se}{~}\myuline{procedura.pubblicato}{~= sì{]} }\myuline{procedura.pubblicato}{~= no}
	\end{itemize}
\end{itemize}

\subsection[eliminaProcedura]{\texorpdfstring{eliminaProcedura(\myuline{procedura}: Procedura)}}\label{eliminaProcedura}
\textbf{Pre-condizioni: }{-}\newline
\textbf{Post-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {se }\textit{c }{è }\textbf{proprietario di}{~}\myuline{procedura}{, }\myuline{procedura}{~non }
	\textbf{riguarda}{~nessun Assegnamento e non }\textbf{serve }{per nessun Menù}
	\setlist{nolistsep}
	\begin{itemize}[label=$-$, noitemsep]
		\item {per ogni Passo }\textit{p}{ tale che }\myuline{procedura}{~è }
			\textbf{formata}{~da }\textit{p}{, }\textit{p}{ è eliminato}
		\item {per ogni Ingrediente }\textit{i}{ tale che }\myuline{procedura}
			{~è }\textbf{composto}{~da }\textit{i}{, }\textit{i}{ è eliminato}
	\end{itemize}
	\item \myuline{procedura}{~è eliminata}
\end{itemize}

\section[aggiungePasso]{\texorpdfstring{aggiungePasso(\myuline{descrizione}:{~Testo, }\myuline{prep}?: sì/no, \myuline{ripetizioni}?: numero)}}\label{aggiungePasso}
\textbf{Pre-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso la definizione di una Procedura }\textit{p}
\end{itemize}
\textbf{Post-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è stata creata una istanza }\textit{ps}{ di Passo semplice}
	\item \textit{pa.descrizione = }\myuline{descrizione}
	\item {[}\textbf{Se }\myuline{prep}{ è specificato}{] } \textit{ps.preparabileInAnticipo }{= }\myuline{prep}\newline
				\textbf{altrimenti} \textit{ps.preparabileInAnticipo }{= }\myuline{no}
	\item {[}\textbf{Se }{ sono specificate delle }\myuline{ripetizioni}{] } \textit{ps.ripetizione }{= }\myuline{ripetizioni}
	\item \textit{p}{ è }\textbf{formato }{da }\textit{ps}
\end{itemize}

\subsection[creaRaggruppamentoPassi]{\texorpdfstring{creaRaggruppamentoPassi(\myuline{descrizione}: testo, \myuline{lista p1,...,pN di Passi}: Passo, \myuline{ripetizioni}?: numero)}}\label{creaRaggruppamentoPassi}
\textbf{Pre-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso la definizione di una Procedura }\textit{p}
\end{itemize}
\textbf{Post-condizioni:} 
\begin{itemize}[label=$-$, noitemsep]
	\item {è stata creata una istanza }\textit{pr}{ Raggruppamento}
  \item \textit{pr.descrizione = }\myuline{descrizione}
  \item \textit{pr}{ è }\textbf{formato}{ da tutti e soli i passi }\textit{p}{ appartenenti alla }\myuline{lista di Passi}
  \item {[}\textbf{Se }{ sono specificate delle }\myuline{ripetizioni}{] } \textit{pr.ripetizione }{= }\myuline{ripetizioni}
  \item \textit{p}{ è }\textbf{formato }{da }\textit{pr}
\end{itemize}

\subsection[creaVariantePassi]{\texorpdfstring{creaVariantePassi(\myuline{Passo1}: Passo, \myuline{Passo2}: Passo)}}\label{creaVariantePassi}
\textbf{Pre-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso la definizione di una Procedura }\textit{p}
\end{itemize}
\textbf{Post-condizioni:} 
\begin{itemize}[label=$-$, noitemsep]
	\item \myuline{Passo1}{ è }\textbf{variante di }\myuline{Passo 2}
\end{itemize}

\section[aggiungiIngrediente]{\texorpdfstring{aggiungiIngrediente(\myuline{nome}{: testo, }\myuline{dosi}?: numero, \myuline{unitàDiMisura}?: testo)}}\label{aggiungiIngrediente}
\textbf{Pre-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso la definizione di una Procedura }\textit{p}
\end{itemize}
\textbf{Post-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è stata creata una istanza }\textit{i}{ di Ingrediente}
	\item \textit{i.nome }{= }\myuline{nome}
	\item {{[}}\textbf{Se}{ sono specificate le }\myuline{dosi}{{]} }\textit{i.dose }{= }\myuline{dosi}
 	\item {{[}}\textbf{Se }\myuline{unitàDiMisura}{ specificata}{{]} }\textit{i.unitàDiMisura }{= }\myuline{unitàDiMisura}
	\item \textit{i }\textbf{compone }\textit{p}
\end{itemize}

\subsection[modificaIngrediente]{\texorpdfstring{modificaIngrediente(\myuline{ingrediente}{: Ingrediente, }\myuline{dosi}: numero, \myuline{unitàDiMisura}?: testo)}}\label{modificaIngrediente}
\textbf{Pre-condizioni: }
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso la definizione di una procedura }\textit{p }{e esiste un}
		\myuline{ingrediente}{~}\textit{i}{~tale che }\textit{p}{~è }\textbf{composto}{~da }\textit{i}
\end{itemize}
\textbf{Post-condizioni: }
\begin{itemize}[label=$-$, noitemsep]
	\item \textit{i.dose }{= }\myuline{dosi}
  \item {{[}}\textbf{Se }\myuline{unitàDiMisura}{ specificata}{{]} }\textit{i.unitàDiMisura }{= }\myuline{unitàDiMisura}
\end{itemize}

\subsection[eliminaIngrediente]{\texorpdfstring{eliminaIngrediente(\myuline{ingrediente}: Ingrediente)}}\label{eliminaIngrediente}
\textbf{Pre-condizioni: }
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso la definizione di una procedura }\textit{p }{e esiste un}
		\myuline{ingrediente}{~}\textit{i}{~tale che }\textit{p}{~è }\textbf{composto}{~da }\textit{i}
\end{itemize}
\textbf{Post-condizioni: }
\begin{itemize}[label=$-$, noitemsep]
	\item {l'istanza }\myuline{ingrediente}{ viene eliminata}
\end{itemize}

\section[consultaRicettario]{\texorpdfstring{consultaRicettario()}}\label{consultaRicettario}
\textbf{Pre-condizioni:}{ -}\newline
\textbf{Post-condizioni: }{-}\newline

\section[aggiungiPreparazioneComeIngrediente]{\texorpdfstring{aggiungiPreparazioneComeIngrediente(\myuline{preparazione}: Preparazione)}}\label{aggiungiPreparazioneComeIngrediente}
\textbf{Pre-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso la definizione di una Procedura }\textit{p}
\end{itemize}
\textbf{Post-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item \myuline{preparazione}\textbf{ è ingrediente}{~in }\textit{p}
\end{itemize}

\subsection[eliminaPreparazioneComeIngrediente]{\texorpdfstring{eliminaPreparazioneComeIngrediente(\myuline{preparazione}: Preparazione)}}\label{eliminaPreparazioneComeIngrediente}
\textbf{Pre-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso la definizione di una Procedura }\textit{p}
\end{itemize}
\textbf{Post-condizioni:} % TODO

\section[modificaPasso]{\texorpdfstring{modificaPasso(\myuline{passo}: Passo, }\myuline{descrizione}{: testo, \myuline{prep}?: sì/no)}}\label{modificaPasso}
\textbf{Pre-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso la definizione di una Procedura }\textit{p}{ e }\textit{p }
		{è }\textbf{formato da }\myuline{passo}
\end{itemize}
\textbf{Post-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item \myuline{passo.descrizione}{ = }\myuline{descrizione}
\end{itemize}

\subsection[modificaOrdinePassi]{\texorpdfstring{modificaOrdinePassi(\myuline{ordinamento})}}\label{modificaOrdinePassi}
\textbf{Pre-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso la definizione di una Procedura }\textit{p}
\end{itemize}
\textbf{Post-condizioni: }
\begin{itemize}[label=$-$, noitemsep]
	\item {l'associazione}\textbf{~formato da}{~tra }\textit{p}{~e }\textit{i}
		{~Passi è stata modificata in accordo a }\myuline{ordinamento}
\end{itemize}

\subsection[eliminaPasso]{\texorpdfstring{eliminaPasso(\myuline{passo}: Passo)}}\label{eliminaPasso}
\textbf{Pre-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso la definizione di una Procedura }\textit{p}
\end{itemize}
\textbf{Post-condizioni: } % TODO

\section[dettagliaProcedura]{\texorpdfstring{dettagliaProcedura(\myuline{annotazione}: testo, }
\myuline{porzioni}{?: numero, }\myuline{tAttività}{?: LocalTime, } \myuline{tTotale}
{?: LocalTime, }\myuline{tUltimazione} {?: LocalTime)}}\label{dettagliaProcedura}
\textbf{Pre-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso la definizione di una Procedura }\textit{p}
\end{itemize}
\textbf{Post-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {viene creata una nuova istanza }\textit{a }{di Annotazione}
	\item \textit{a.descrizione }{= }\myuline{annotazione}
	\item \textit{p }{è }\textbf{classificata}{~da }\textit{a}
	\item {{[}}\textbf{Se}{~sono specificate le }\myuline{porzioni}{{]} }\textit{p.porzioni }{= }\myuline{porzioni}
	\item {{[}}\textbf{Se}{~è specificata una }\myuline{tAttività}{{]} }\textit{p.tempoDiAttività }{= }\myuline{tAttività}
	\item {{[}}\textbf{Se}{~è specificata una }\myuline{tTotale}{{]} }\textit{p.tempoTotale }{= }\myuline{tTotale}
	\item {{[}}\textbf{Se}{~è specificata una }\myuline{tUltimazione}{{]} }\textit{p.tempoDiUltimazione }{= }\myuline{tUltimazione}
\end{itemize}

\subsection[modificaDettagliProcedura]{\texorpdfstring{modificaDettagliProcedura(\myuline{annotazione}{: Annotazione, }\myuline{descrizione}{: 
testo, }\myuline{porzioni?}{: numero, }\myuline{tAttività}{?: LocalTime, }\myuline{tTotale}{?:
LocalTime, }\myuline{tUltimazione}?: LocalTime)}}\label{modificaDettagliProcedura}
\textbf{Pre-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso la definizione di una Procedura }\textit{p }{che è classificata da}{~}\myuline{annotazione}
\end{itemize}
\textbf{Post-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item \myuline{annotazione.tag}{ = }\myuline{descrizione}
	\item {{[}}\textbf{Se}{~sono specificate le }\myuline{porzioni}{]} \textit{p.porzioni}{ = }\myuline{porzioni}
	\item {{[}}\textbf{Se}{~è specificata una }\myuline{tAttività}{{]} }\textit{p.tempoDiAttività }{= }\myuline{tAttività}
	\item {{[}}\textbf{Se}{~è specificata una }\myuline{tTotale}{{]} }\textit{p.tempoTotale }{= }\myuline{tTotale}
	\item {{[}}\textbf{Se}{~è specificata una }\myuline{tUltimazione}{{]} }\textit{p.tempoDiUltimazione }{= }\myuline{tUltimazione}
\end{itemize}

\subsection[eliminaAnnotazione]{\texorpdfstring{eliminaAnnotazione(\myuline{annotazione}: Annotazione)}}\label{eliminaAnnotazione}
\textbf{Pre-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso la definizione di una Procedura }\textit{p }
	\item \textit{p }{è classificata da}{~}\myuline{annotazione}
\end{itemize}
\textbf{Post-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {l'istanza }\myuline{annotazione}{ viene eliminata}
\end{itemize}

\newpage
\subsection[estrapolaProcedura]{\texorpdfstring{estrapolaProcedura(\myuline{nome}: testo, \myuline{èRicetta}: sì/no)}}\label{estrapolaProcedura}
\textbf{Pre-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso la definizione di una Procedura }\textit{p }
\end{itemize}
\textbf{Post-condizioni:} \textit{chiedi se ci sta riscrivere codice anziché richiamare creaProcedura}
\begin{itemize}[label=$-$, noitemsep]
		\item {[\textbf{Se} \myuline{èRicetta} == sì]}
		\setlist{nolistsep}
		\begin{itemize}[label=$-$, noitemsep]
			\item È stata creata un'istanza \textit{pp} di Ricetta
			\item \textit{pp.pubblicato} = no
			\item \textit{pp.nome } = \myuline{nome}
		\end{itemize}
		\item {[\textbf{Se} \myuline{èRicetta} == no]}
		\setlist{nolistsep}
		\begin{itemize}[label=$-$, noitemsep]
			\item È stata creata un'istanza \textit{pp} di Preparazione
			\item \textit{pp.pubblicato} = no
			\item \textit{pp.nome } = \myuline{nome}
		\end{itemize}
		\item \textit{pp}\textbf{ si trova} nel ricettario
		\item \textit{c }\textbf{è proprietario di}\textit{ pp}
\end{itemize}

\begingroup
\renewcommand{\thesubsection}{\thesection.c.2}
\subsection[inserisciPassi]{\texorpdfstring{inserisciPassi(\myuline{lista pa1,...,paN di Passi}: Passo)}}\label{inserisciPassi}
\textbf{Pre-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso l'estrapolazione di una Procedura }\textit{pp}{ da una Procedura }\textit{p }
  \item {ogni passo della }\myuline{lista di Passi}\textbf{ forma}{ la procedura }\textit{p }
\end{itemize}
\textbf{Post-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item \textit{pp}{ è }\textbf{formato}{ da tutti e soli i passi }\textit{pa}{ appartenenti alla }\myuline{lista di Passi}
 \item i Passi della \myuline{lista di Passi} sono rimossi da \textit{p}
\end{itemize}
\endgroup

\begingroup
\renewcommand{\thesubsection}{\thesection.c.3}
\subsection[inserisciIngredienti]{\texorpdfstring{inserisciIngredienti(\myuline{ingrediente}: Ingrediente, \myuline{dose}: numero)}}\label{inserisciIngredienti-7}
\textbf{Pre-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso l'estrapolazione di una Procedura }\textit{pp}{ da una Procedura }\textit{p }
 	\item \myuline{ingrediente}\textbf{ compone }\textit{p}
\end{itemize}
\textbf{Post-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item viene creata un'istanza \textit{i} di Ingrediente
	\item \textit{i.dose}{ = }\myuline{dose}
  \item \textit{i.nome}{ = }\myuline{ingrediente.nome}
  \item \textit{i.unitàDiMisura}{ = }\myuline{ingrediente.unitàDiMisura}
	\item \myuline{ingrediente.dose}{ = }\myuline{ingrediente.dose - dose}
	\item {[}{Se }\myuline{ingrediente.dose}{ $\le$ 0}{]}{ viene eliminata l'associazione tra }\myuline{ingrediente}{ e }\textit{p}
	\item \textit{pp}{ è }\textbf{composto}{ da }\textit{i}
\end{itemize}
\endgroup

\section[pubblica]{\texorpdfstring{pubblica(\myuline{nome}?: testo)}}\label{pubblica}
\textbf{Pre-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso la definizione di una Procedura }\textit{p}
\end{itemize}
\textbf{Post-condizioni:} % TODO Builder pattern maybe?
\begin{itemize}[label=$-$, noitemsep]
	\item {{[}}\textbf{Se }\myuline{nome}{~}{specificato}{{]} }\textit{p.nome }{= }\myuline{nome}
	\item \textit{p.pubblicato }{= sì}
\end{itemize}

\subsection[terminaSenzaPubblicare]{\texorpdfstring{terminaSenzaPubblicare()}}\label{terminaSenzaPubblicare}
\textbf{Pre-condizioni:}
\begin{itemize}[label=$-$, noitemsep]
	\item {è in corso la definizione di una Procedura }\textit{p}
\end{itemize}
\textbf{Post-condizioni: }{-}
